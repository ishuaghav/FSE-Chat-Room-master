function renderLoginPage(){$("#chatroom").hide(),$("#logout").hide(),$("#username").hide(),$("#login").show(),$("#m1").val("")}function checkEmpty(e){return 0===e.length||!e.trim()}function OnSubmit(e){if("fromChatWindow"==e){if(checkEmpty($("#m").val()))return;var t={what:$("#m").val(),who:$("#m1").val(),when:(new Date).getTime()};socket.emit("inputMessage",JSON.stringify(t)),$("#m").val("")}else if("fromLogin"==e){if(checkEmpty($("#m1").val()))return;socket.connect(),renderChatroom(),$("#username").text("Hi "+$("#m1").val()+"!"),$("#messages").scrollTop($("#messages")[0].scrollHeight)}else"fromLogout"==e&&(socket.disconnect(),renderLoginPage())}function renderChatroom(){$("#chatroom").show(),$("#logout").show(),$("#username").show(),$("#login").hide()}function prepareChatBubble(e){var t=new Date(0);t.setUTCMilliseconds(e.when);var o='<li><div style="color:grey; text-align:center; font-size:x-small">'+t.toDateString()+" "+t.toLocaleTimeString(),n='<div style="color:Red; text-align:center; font-size:x-small">'+e.who+"</div>",i='<div style="font-size:small">'+e.what+"</div></li>";$("#messages").append(o+n+i)}var socket=io();socket.on("inputMessage",function(e){var t=JSON.parse(e.toString());prepareChatBubble(t),$("#messages").scrollTop($("#messages")[0].scrollHeight)}),$(function(){renderLoginPage()});